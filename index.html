<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Gioco Romano - Deluxe Edition</title>
    <style>
        :root {
            --romano-red: #8b4513;
            --parchment: #fffaf0;
            --info-bg: #e8dfcc;
            --player1-color: #4a3728;
            --player2-color: #a0522d;
        }

        body { 
            background-color: #f0eada; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 10px;
            font-family: "Times New Roman", serif;
        }

        .info-box {
            background-color: var(--info-bg);
            width: 100%;
            max-width: 420px;
            padding: 15px;
            border: 1px solid var(--romano-red);
            border-radius: 8px;
            margin-bottom: 10px;
            box-sizing: border-box;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            font-size: 0.9rem;
        }

        .instruzioni { 
            width: 100%;
            max-width: 420px;
            font-size: 0.8rem; 
            line-height: 1.3; 
            color: #333; 
            margin-bottom: 10px;
        }
        .instruzioni b { color: var(--romano-red); }

        .spel-container {
            background-color: var(--parchment); 
            width: 100%;
            max-width: 420px;
            padding: 15px; 
            border: 6px double var(--romano-red);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
            box-sizing: border-box;
        }

        h1 { color: var(--romano-red); margin: 0; font-size: 1.8rem; letter-spacing: 2px; }

        #bord-vlak { 
            position: relative; 
            width: 100%; 
            aspect-ratio: 1.5 / 1; 
            margin: 15px auto;
            touch-action: none;
            overflow: visible;
        }

        svg { width: 100%; height: 100%; display: block; pointer-events: none; }
        .lijn { stroke: #4a3728; stroke-width: 5; stroke-linecap: round; fill: none; }

        .pion {
            width: 12%; aspect-ratio: 1 / 1; border-radius: 50%;
            position: absolute; cursor: grab; z-index: 10;
            touch-action: none; box-shadow: 0 4px 8px rgba(0,0,0,0.4);
            border: 2px solid #333; transform: translate(-50%, -50%);
            pointer-events: auto;
        }
        .jager { background: radial-gradient(circle at 30% 30%, #444, #000); }
        .prooi { background: radial-gradient(circle at 30% 30%, #fff, #ccc); }

        .score-container {
            width: 100%;
            max-width: 420px;
            margin-top: 10px;
            box-sizing: border-box;
        }

        .current-stats {
            background: var(--romano-red);
            color: white;
            padding: 10px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-around;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .history-list {
            background: white;
            border: 1px solid var(--romano-red);
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 120px;
            overflow-y: auto;
            padding: 5px;
        }

        .score-entry {
            display: flex;
            justify-content: space-between;
            padding: 5px 10px;
            margin-bottom: 3px;
            border-radius: 4px;
            font-size: 0.85rem;
            color: white;
        }

        .p1-row { background-color: var(--player1-color); }
        .p2-row { background-color: var(--player2-color); }

        .btn-group { display: flex; gap: 5px; margin-top: 10px; }
        .action-btn {
            flex: 1; padding: 10px; border: none; border-radius: 5px;
            font-weight: bold; cursor: pointer; color: white;
        }
        .reset-btn { background: #5d4037; }
        .save-btn { background: var(--romano-red); }
    </style>
</head>
<body>

    <div class="info-box">
        <strong>Storia / Geschiedenis:</strong><br>
        <i>Herontdekt door archeologen. Een strategisch Romeins duel tussen jagers en prooi.</i><br>
        Riscoperto dagli archeologi. Un duello strategico Romane tra cacciatori e preda.
        <hr style="border: 0; border-top: 1px dotted var(--romano-red);">
        <strong>Regole / Regels:</strong><br>
        • Cacciatori (Neri): bloccano la preda. / Jagers (Zwart): sluit de prooi in.<br>
        • Preda (Bianca): cerca di scappare. / Prooi (Wit): probeer te ontsnappen.
    </div> 

    <div class="instruzioni">
        <b>Jager (4 pionnen) vs Prooi (2 pionnen)</b>. De jager begint.<br>
        <b>Cacciatore (4 pedine) contro Preda (2 pedine)</b>. Il cacciatore inizia.<br>
        • Spelers bewegen om de beurt 1 kruispunt over de lijnen.<br>
        • I giocatori si moovono a turno di 1 incrocio lungo le linee.<br>
        • Je mag niet springen. Pionnen mogen niet op dezelfde plek staan.<br>
        • <b>Einde:</b> Als beide prooien zijn ingesloten.<br>
        • Fine: quando entrambe le prede sono circondate.
    </div>

    <div class="spel-container">
        <h1>GIOCO ROMANO</h1>
        <div id="bord-vlak">
            <svg viewBox="0 0 500 350">
                <rect x="50" y="50" width="400" height="250" class="lijn" />
                <line x1="250" y1="50" x2="250" y2="300" class="lijn" />
                <line x1="150" y1="50" x2="50" y2="150" class="lijn" />
                <line x1="150" y1="300" x2="50" y2="200" class="lijn" />
                <line x1="350" y1="50" x2="450" y2="150" class="lijn" />
                <line x1="350" y1="300" x2="450" y2="200" class="lijn" />
            </svg>
            
            <div class="pion prooi" style="top: 14.3%; left: 10%;"></div>
            <div class="pion prooi" style="top: 85.7%; left: 10%;"></div>
            
            <div class="pion jager" style="top: 14.3%; left: 90%;"></div>
            <div class="pion jager" style="top: 38%; left: 90%;"></div>
            <div class="pion jager" style="top: 61.7%; left: 90%;"></div>
            <div class="pion jager" style="top: 85.7%; left: 90%;"></div>
        </div>
    </div>

    <div class="score-container">
        <div class="current-stats">
            <span>Turno: <span id="curPlayer">Cacciatore</span></span>
            <span>Zetten Jager: <span id="moveCount">0</span></span>
        </div>
        <div class="history-list" id="scoreHistory"></div>
        <div class="btn-group">
            <button class="action-btn save-btn" onclick="saveRound()">RONDE OPSLAAN-SALVA ROUND</button>
            <button class="action-btn reset-btn" onclick="resetBoard()">NIEUWE RONDE-NUOVO ROUND</button>
        </div>
    </div>

<script>
    let hunterMoves = 0;
    let roundCount = 1;
    let hunterPlayer = 1;
    const board = document.getElementById('bord-vlak');
    let selectedPiece = null;
    let offsetX, offsetY;

    function startDrag(e) {
        if (!e.target.classList.contains('pion')) return;
        selectedPiece = e.target;
        const client = e.type.includes('touch') ? e.touches[0] : e;
        const rect = selectedPiece.getBoundingClientRect();
        offsetX = client.clientX - (rect.left + rect.width / 2);
        offsetY = client.clientY - (rect.top + rect.height / 2);
        selectedPiece.style.zIndex = 1000;
    }

    function moveDrag(e) {
        if (!selectedPiece) return;
        const client = e.type.includes('touch') ? e.touches[0] : e;
        const boardRect = board.getBoundingClientRect();
        let x = ((client.clientX - boardRect.left - offsetX) / boardRect.width) * 100;
        let y = ((client.clientY - boardRect.top - offsetY) / boardRect.height) * 100;
        selectedPiece.style.left = Math.max(0, Math.min(100, x)) + '%';
        selectedPiece.style.top = Math.max(0, Math.min(100, y)) + '%';
    }

    function endDrag() {
        if (selectedPiece) {
            // Alleen tellen als een JAGER wordt verplaatst
            if (selectedPiece.classList.contains('jager')) {
                hunterMoves++;
                document.getElementById('moveCount').innerText = hunterMoves;
            }
            selectedPiece.style.zIndex = 10;
            selectedPiece = null;
        }
    }

    function saveRound() {
        const history = document.getElementById('scoreHistory');
        const scoreEntry = document.createElement('div');
        scoreEntry.className = `score-entry ${hunterPlayer === 1 ? 'p1-row' : 'p2-row'}`;
        const finalMoves = document.getElementById('moveCount').innerText;
        scoreEntry.innerHTML = `<span>Ronde ${roundCount}: Speler ${hunterPlayer} (Jager)</span><span>${finalMoves} zetten</span>`;
        history.prepend(scoreEntry);
        roundCount++;
        hunterPlayer = hunterPlayer === 1 ? 2 : 1;
        resetBoard();
    }

    function resetBoard() {
        const jagers = document.querySelectorAll('.jager');
        const prooien = document.querySelectorAll('.prooi');
        prooien[0].style.top = '14.3%'; prooien[0].style.left = '10%';
        prooien[1].style.top = '85.7%'; prooien[1].style.left = '10%';
        jagers[0].style.top = '14.3%'; jagers[0].style.left = '90%';
        jagers[1].style.top = '38%'; jagers[1].style.left = '90%';
        jagers[2].style.top = '61.7%'; jagers[2].style.left = '90%';
        jagers[3].style.top = '85.7%'; jagers[3].style.left = '90%';
        
        // Reset de jager-teller voor de nieuwe ronde
        hunterMoves = 0;
        document.getElementById('moveCount').innerText = "0";
    }

    document.addEventListener('mousedown', startDrag);
    document.addEventListener('touchstart', (e) => { startDrag(e); }, {passive: false});
    document.addEventListener('mousemove', moveDrag);
    document.addEventListener('touchmove', (e) => { if(selectedPiece) { e.preventDefault(); moveDrag(e); } }, {passive: false});
    document.addEventListener('mouseup', endDrag);
    document.addEventListener('touchend', endDrag);
</script>
</body>
</html>

